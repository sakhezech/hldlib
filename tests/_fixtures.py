import pytest

from hldlib import HLDDirection, HLDLevel, HLDObj, HLDSaveFile


@pytest.fixture
def testing_savefile() -> HLDSaveFile:
    return HLDSaveFile.from_string(
        '67eb87838659be77713bcdb237b0420a59d817df6eb7cd347d4b75823c138d6876d36e4eab448002eyJiYWRhc3MiOiAwLjAsICJtYXBNb2QiOiAiMTMyPTImPjE0ND0yJj4xNjE9MiY+MTgxPTImPjEwNj0yJj4xMDk9MiY+MTk0PTImPjIyNj0yJj4xODM9MiY+MTc0PTImPjE2MD0yJj4yMTg9MiY+OTU9MiY+MTA0PTImPjIyMD0yJj4yMTA9MiY+IiwgImRhdGVUaW1lIjogNDQ5ODAuNTI0MTI2LCAiaGVhbHRoVXAiOiAwLjAsICJjbCI6ICI5PTEwMTM4NyYxODUyNjcmMjA2MTM5JjI2Njc4NCY+MTM9LTE1MTg4NTEmPjc9LTI1NTEwMCYtMTg3OTA1Ji0xNjczMjYmLTUzMzkyJj42PS0xODk1NDgxJi0xMDQ3NDMwJi05MzI0NzEmLTkwMjIxMiY+OD0tNTU1Mjc5Ji0zOTg2MzUmLTM4NjQ1NyYtNjc2MzU3Jj4iLCAiZGVzdHJ1Y3QiOiAiLTM2MjI0Nj0xNjMmMzcuMjEmPjE4MjYxMj0yMTgmMzAuODQmPi0xOTc3OTEzPTIyMCYyNC42NCY+MTk1Mjk3PTIxOSYzMC40MyY+LTM2ODk5OT0xNjMmMzcuMjEmPjIwNDUwNT0yMjAmMjQuNjQmPjIwNDA1OD0yMjAmMjQuNjQmPjIwNTkwNz0yMjAmMjQuNjQmPjIwMzA3MT0yMjAmMjQuNjQmPi0xODIxODkwPTE3OCYxNS44MiY+LTY0OTEwPTE5MyYxNi4xMCY+LTE5NzkwMDE9MjA5JjMxLjg0Jj4tMTgyODY4ND0xNzEmMTkuMjkmPjE4MTM3Nj0yMTgmMzAuODQmPi0yMTU1NDE9MTc4JjE1LjgyJj4tMjE1MTIyPTE3OCYxNS44MiY+LTIxNDY5MT0xNzgmMTUuODImPi0yMTYyODI9MTc4JjE1LjgyJj4tMTgzNjE3Nj0xNjMmMzcuMjEmPi0xODI4MDIwPTE3MSYxOS4yOSY+MjAxMDk2PTIyMCYyNC42NCY+LTE3Nzk0MDg9MjIwJjI0LjY0Jj4tNDg2MTA9MTk1JjE3LjI5Jj4tMTc4MDI0MT0yMTkmMzAuNDMmPjIwNzQzNT0yMjAmMjQuNjQmPi0xOTE1ODQ1PTg0JjIuNzcmPi0zNTcwNzA9MTY0JjM4LjU1Jj4tMjEzNjY1PTE3OCYxNS44MiY+LTI1MzY3Mj0xNzQmMTguNTYmPjE4MjEwND0yMTgmMzAuODQmPjkxNTc2PTIwOSYzMS44NCY+LTIxMjE0MT0xNzgmMTUuODImPi0zNTQzNDg9MTY0JjM4LjU1Jj4xNDczNDg9MjE0JjMxLjI4Jj4tMjE3MTMzPTE3OCYxNS44MiY+OTQ1MDY9MjA5JjMxLjg0Jj4tMjEyMDI0PTE3OCYxNS44MiY+LTI1MjIwNj0xNzQmMTguNTYmPi0zNzMzOTU9MTYyJjM2Ljk4Jj4xODU1MjU9MjE4JjMwLjg0Jj4tMTk1MzYwNT00NiY4LjM1Jj4tMjcxOTUxPTE3MiYxOS4wNCY+LTI1NTc5Nz0xNzQmMTguNTYmPi0yMTI4MDM9MTc4JjE1LjgyJj4xODMyNDA9MjE4JjMwLjg0Jj4tMTgyMTYwNz0xNzgmMTUuODImPjE4NTM5Mz0yMTgmMzAuODQmPi0zNTY3MTY9MTY0JjM4LjU1Jj4tMjg3MjMyPTE3MSYxOS4yOSY+MTQ2OTcwPTIxNCYzMS4yOCY+LTE3Nzk4Mjc9MjIwJjI0LjY0Jj4yMDQ2MzY9MjIwJjI0LjY0Jj4xOTQ4NDA9MjE5JjMwLjQzJj4tMzUzMDY2PTE2NCYzOC41NSY+MTgyNDE4PTIxOCYzMC44NCY+MjA1ODYyPTIyMCYyNC42NCY+LTQyMzg3PTE5NSYxNy4yOSY+LTE3NzQyNjM9MjI1JjMwLjE1Jj4tMjE3MDUzPTE3OCYxNS44MiY+MjA0NTM1PTIyMCYyNC42NCY+LTM1MzI4Mj0xNjQmMzguNTUmPi0xNzgxNjk5PTIxOCYzMC44NCY+MTg3NTM3PTIxOCYzMC44NCY+LTE4MDUxMzg9MTk0JjE3LjQ3Jj4yMDc3NDM9MjIwJjI0LjY0Jj4tNjI0MTY9MTkzJjE2LjEwJj4tMjEzNDAyPTE3OCYxNS44MiY+LTM2MzM2Nz0xNjMmMzcuMjEmPi0yMTgwODQ9MTc4JjE1LjgyJj4tMzc1NTE0PTE2MiYzNi45OCY+LTY3NDcxPTE5MyYxNi4xMCY+LTE1MzI5NzY9NDYmOC4zNSY+MjAzOTA4PTIyMCYyNC42NCY+LTIxNTc5Mz0xNzgmMTUuODImPi0yMTIwNTM9MTc4JjE1LjgyJj4yMDM3NjM9MjIwJjI0LjY0Jj4tMzYyMzQ4PTE2MyYzNy4yMSY+MjAxNDI4PTIyMCYyNC42NCY+MTg0MTU1PTIxOCYzMC44NCY+MTgzOTM5PTIxOCYzMC44NCY+MTQ1MjUzPTIxNCYzMS4yOCY+MTQ1NzkyPTIxNCYzMS4yOCY+LTQ4NTUyPTE5NSYxNy4yOSY+LTI3NDcyMz0xNzImMTkuMDQmPiIsICJ2YWx1ZXMiOiAiVmFsdWViYWRhc3NPZmZpY2VTdGF0ZT0yPiIsICJndW5SZW1pbmRlclRpbWVzIjogMC4wLCAiZmlyZXBsYWNlU2F2ZSI6IDAuMCwgImNoZWNrSFAiOiA1LjAsICJjb21wU2hlbGwiOiAwLjAsICJjU3dvcmRzIjogIjArIiwgImNhcGUiOiAwLjAsICJoYWxsdWMiOiAwLjAsICJuZXdjb21lckhvYXJkZU1lc3NhZ2VTaG93biI6IDAuMCwgInR1dEhlYWwiOiAwLjAsICJub1NwYXduIjogIi0xMDk3OTU0Ky0xNDU1MDQrLTE4NzExNjUrIiwgImNoZWNrWSI6IDYwOC4wLCAic3BlY2lhbFVwIjogMC4wLCAiY2hlY2tCYXQiOiAxMDAuMCwgIm5vdmljZU1vZGUiOiAwLjAsICJzdWNjZXNzZnVsSGVhbFRpbWVzIjogNS4wLCAiY0NhcGVzIjogIjArIiwgIkNIIjogMC4wLCAiZ2VhciI6IDAuMCwgImNoZWNrQ0lEIjogNjI0NTMxLjAsICJyb29tcyI6ICI0Nis3OSs0Nys0OCs0OSs1MCs1Mys2MSs2Mis4NCs4NSs4OCs5MCs5Mis5Mys5NCsxMDQrOTUrMTA2KzEwNysxMDgrMTA5Kzk2Kzk3KzY0KzE3MSsxNzIrMTczKzE3NCsxNzUrMTc3KzE4MSsxODIrMTgzKzE4NCsxODUrMTc4KzE5MysxOTQrMTk1KzE5Nis2NSsyMDkrMjEwKzIxMSsyMTQrMjE4KzIxOSsyMjArMjI1KzIyNisyMzgrMjQ4KzI0NysyNDYrNjMrMTI4KzEzMCsxNDQrMTUyKzE2MCsxNjErMTYyKzE2MysxNjQrMTY1KzEzMisyNTYrMjU3KzI1OCsyNTkrMjYyKyIsICJwZXJtYVMiOiAiLTEwNDc5NDA9Mj4tNjkyMjMyPTI+LTEzODcwNTY9Mj4tNjk3MzYxPTI+LTE4MzM1Mz0yPjM4Mzk4OT0yPiIsICJjaGVja1Jvb20iOiAyNjIuMCwgIndlbGxNYXAiOiAiMSswKzIrMysiLCAiY1NoZWxscyI6ICIwKyIsICJ0YWJsZXQiOiAiIiwgInN1Y2Nlc3NmdWxXYXJwVGltZXMiOiAwLjAsICJza2lsbCI6ICIiLCAiYm9zc2VzIjogIjMuMjA9MzExJjIyNiY+IiwgInNjSyI6ICIxPTExPiIsICJ3YXJwIjogIjArMiszKyIsICJoYXNNYXAiOiAwLjAsICJldmVudHMiOiAiLTE1MzQyMTQrLTE1MTc2NjkrLTE0OTc2NjQrLTI1MjY5NCstMjI2OTc1Ky0xODA2NTkrLTE3NDg1NCstMTgyNDUzMystNDU2NzcrMjUzNDI2KzM4NTUwMSstMzk2MjcyKy0zNDQ5MjIrNTg2NjY2KzYyNjc3NisiLCAiZ2VhclJlbWluZGVyVGltZXMiOiAwLjAsICJlbmVtaWVzIjogIi0xODY4Mzk9MTgxJjEyLjE0Jj4tMTg2MjcxPTE4MSYxMi4xNCY+MjU1NTk4PTIyNSYzMC4xNSZzcHJfU21hbGxDcnlzdGFsU3BpZGVyRGVhZCYxJjUxNiY2OTgmLTEmPjI1MTYxOD0yMjUmMzAuMTUmc3ByX1JpZmxlRGlya0RlYWQmMSY0OTUmNzIwJi0xJj4tMjEyODI1PTE3OCYxNS44MiZzcHJfTmluamFGcm9nRGVhZCYxJjczMyYxNjImLTEmPi0xNjM0MDk9MTgzJjE0LjQ1Jj4yMDI5NTk9MjIwJjI0LjY0JnNwcl9Xb2xmRGVhZCYxJjY3MSYzNzMmMSY+LTkxNDgwMT0xMDgmNy42MyZzcHJfQ3VsdEJpcmREZWFkJjEmNTgyJjIzOSYtMSY+LTE5NTEyNzA9NDgmOS4xMCZzcHJfUmlmbGVEaXJrRGVhZCYxJjExODcmMTA5MCYxJj4yNTU4MzI9MjI1JjMwLjE1JnNwcl9TbWFsbENyeXN0YWxTcGlkZXJEZWFkJjEmNTk3JjY4NiYxJj4tMTkzNzQwNj02MiYyLjM3JnNwcl9EaXJrRGVhZCYxJjUyMiYzNzgmLTEmPi0xNjY3MTg9MTgzJjE0LjQ1JnNwcl9SaWZsZURpcmtEZWFkJjEmNjcyJjkxNyYtMSY+NDcxMDUyPTI0NyYyOS41OCY+LTE4NTc1Mj0xODEmMTIuMTQmPi02Mzc3OT0xOTMmMTYuMTAmc3ByX1JpZmxlRGlya0RlYWQmMSYxMDk3JjE0NzMmLTEmPi0xMzQ2Mjk3PTY1JjMyLjA4JnNwcl9TcGlkZXJEZWFkJjEmOTYmNDM0JjEmPjIwMjQ4Mz0yMjAmMjQuNjQmc3ByX1dvbGZEZWFkJjEmMzAzJjI0NCYxJj4yMDQyNjc9MjIwJjI0LjY0JnNwcl9Xb2xmRGVhZCYxJjUxMCYzNTImLTEmPi0xNTIzMzAwPTQ3JjguNzEmc3ByX0RpcmtEZWFkJjEmNzgxJjU0MCYtMSY+NDc3NzQ4PTI0NyYyOS41OCY+MjU1NzcyPTIyNSYzMC4xNSZzcHJfU21hbGxDcnlzdGFsU3BpZGVyRGVhZCYxJjU5NiY2OTAmLTEmPi0xNjg2ODY9MTgzJjE0LjQ1Jj4tMzk3NDQ3PTE2MCYzNi4xNiZzcHJfTWlzc2lsZURpcmtEZWFkJjEmMjcyJjg5MyYtMSY+LTkzODU3Mz0xMDYmNy4wNiZzcHJfUmlmbGVEaXJrRGVhZCYxJjM2OSY0MTcmMSY+MjU2ODk3PTIyNSYzMC4xNSZzcHJfU21hbGxDcnlzdGFsU3BpZGVyRGVhZCYxJjgxNCY2ODMmMSY+LTE1MTgzODE9NDgmOS4xMCZzcHJfRGlya0RlYWQmMSYxMjAyJjExMTMmLTEmPjIwNTYxOT0yMjAmMjQuNjQmc3ByX1dvbGZEZWFkJjEmNjE5JjMzMyYxJj4yMDEyODM9MjIwJjI0LjY0JnNwcl9Xb2xmRGVhZCYxJjY1NCYzNzYmMSY+LTM4NzczOD0xNjEmMzYuNTQmc3ByX1JpZmxlRGlya0RlYWQmMSY0MDgmMTQ2Ji0xJj4tMTgxNjUyMj0xODMmMTQuNDUmPjE4NTYzNT0yMTgmMzAuODQmc3ByX1RhbnVraURlYWQmMSYxMTk2JjEwNjImLTEmPjIwNDA4MD0yMjAmMjQuNjQmc3ByX1dvbGZEZWFkJjEmNTYyJjM0MiYxJj4tMTgxNjcxMz0xODMmMTQuNDUmPi0xMzc1ODg2PTYyJjIuMzcmc3ByX0RpcmtEZWFkJjEmNTA0JjQwNSYtMSY+LTE2NDc1Mj0xODMmMTQuNDUmc3ByX1JpZmxlRGlya0RlYWQmMSY0NTYmNzc5JjEmPi0xODE2MTM3PTE4MyYxNC40NSZzcHJfUmlmbGVEaXJrRGVhZCYxJjY0MSYxMDg4Ji0xJj4tNjI1NjY9MTkzJjE2LjEwJnNwcl9EaXJrRGVhZCYxJjEyODcmMTQ1NCYtMSY+MjAyMzE1PTIyMCYyNC42NCZzcHJfV29sZkRlYWQmMSY1MDcmMzcxJi0xJj4xNDI1Mjk9MjE0JjMxLjI4JnNwcl9EaXJrRGVhZCYxJjEyMjgmOTkzJi0xJj4tMTgyMTUxMT0xNzgmMTUuODImc3ByX05pbmphRnJvZ0RlYWQmMSY2OTEmMTk5JjEmPi0xNzc0NjAxPTIyNSYzMC4xNSZzcHJfU21hbGxDcnlzdGFsU3BpZGVyRGVhZCYxJjc2MSY2NjAmMSY+LTE2ODUzND0xODMmMTQuNDUmPi0xMzU2MjU5PTY0JjE5LjYzJnNwcl9TcGlkZXJEZWFkJjEmNDIxJjIyNSYxJj4tMjE3NTYwPTE3OCYxNS44MiZzcHJfSmFyRnJvZ0RlYWQmMSY4ODcmMzE5JjEmPi0xNjc3MTc9MTgzJjE0LjQ1JnNwcl9SaWZsZURpcmtEZWNhcEJvdHRvbSYxJjQ1NiY3NjEmLTEmPi05MzQ5MDQ9MTA2JjcuMDYmc3ByX1JpZmxlRGlya0RlYWQmMSYzNTYmNDQ5JjEmPjI1NTQ2MD0yMjUmMzAuMTUmc3ByX1JpZmxlRGlya0RlYWQmMSY2MjMmNjc2JjEmPi02MzY3OT0xOTMmMTYuMTAmc3ByX0RpcmtEZWFkJjEmMTM0NiYxNDQ2Ji0xJj4tMTgzNjc0MT0xNjMmMzcuMjEmPjIwMzg2Mj0yMjAmMjQuNjQmc3ByX1dvbGZEZWFkJjEmNjUyJjM1OCYtMSY+MjAzMDY2PTIyMCYyNC42NCZzcHJfV29sZkRlYWQmMSY1MDcmMzQwJjEmPi0yMTIzNTM9MTc4JjE1LjgyJnNwcl9KYXJGcm9nRGVhZCYxJjkyMSYyMDEmLTEmPi0xMzUzMzk4PTY0JjE5LjYzJnNwcl9TcGlkZXJEZWFkJjEmNDAzJjIxNCYxJj4yNTEyNTk9MjI1JjMwLjE1JnNwcl9TbWFsbENyeXN0YWxTcGlkZXJEZWFkJjEmODMyJjY5NCYxJj4tMTY1MzAxPTE4MyYxNC40NSZzcHJfRGlya0RlYWQmMSY2NDgmODk3Ji0xJj4tMTY1MzQ2PTE4MyYxNC40NSZzcHJfUmlmbGVEaXJrRGVhZCYxJjY3MyYxMDg4JjEmPi0xNTE0NTMyPTQ4JjkuMTAmc3ByX0RpcmtEZWFkJjEmMTI0NSYxMDk0Ji0xJj4tMTY0MzQ3PTE4MyYxNC40NSY+IiwgInNjVXAiOiAiIiwgImNoZWNrWCI6IDM0Ny4wLCAiYm9zc0dlYXJiaXRzIjogIiIsICJjdWVzIjogIi0xMDkyMDE5Ky0xMDkyNTE3Ky0xMDczMzY2Ky0xMDU1NTc2Ky0yNzYxMjYrLTE4MTQxMjcrLTE0NzU0NystMjE0MDI3Ky03MTYwOTIrIiwgInBsYXlUIjogNDEuMCwgIndlbGwiOiAiMSswKzIrMysiLCAic2MiOiAiMSsiLCAiZHJpZnRlcmtleSI6IDAuMCwgInN1Y2Nlc3NmdWxDb2xsZWN0VGltZXMiOiAwLjAsICJjaGVja0FtbW8iOiAwLjAsICJjaGVja1N0YXNoIjogMS4wLCAiY2hhckRlYXRocyI6IDEyLjAsICJlcTAwIjogMS4wLCAiaGVhbHRoS2l0cyI6ICItMTUzMzYzOSstMTUyNzIxMistMTUyNzA0MSstOTM0OTUxKy0xMzUzNDYzKy0xNjY3OTgrLTE3ODY2NCstNjM3OTErLTUzODM2KzE0NjIyNSstMTc3NDIyMistMzg3OTAzKy0zNjc2MjErLTM0MjM0NistNjczMjA3KyIsICJzd29yZCI6IDAuMCwgImdhbWVOYW1lIjogIlEifSA='
    )


@pytest.fixture
def testing_level() -> HLDLevel:
    return HLDLevel(
        name='rm_A_Test.lvl',
        date=50000.00,
        layer_names={0: 'Door', 1: 'Block', 2: 'Veg', 3: 'Obj', 4: 'Wall'},
        room_settings={
            'lb': 0,
            'bg': '<undefined>',
            'floorSpr': 'bg_C_Floor_Dregs',
            'bri': 1,
            'liteOff': 0,
            'over': 'bg_C_Dregs_N_Overlay',
            'overPit': 0,
            'wallsTop': 1,
            'shadows': 1,
            'flrOutline': 1,
            'flrOC': 16777215,
            'flrOSpr': '<undefined>',
            'wallO': 0,
            'w': 1024,
            'h': 1888,
            'sketchalpha': [0.5, 1, 0],
        },
        objects=[
            HLDObj.from_string(
                'obj,Spawner,5643,522,717,3,-999999,++,-1=Crate,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
            ),
            HLDObj.from_string(
                'obj,Spawner,2261,540,719,3,-999999,++,-1=CrateBig,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
            ),
            HLDObj.from_string(
                'obj,Spawner,4066,480,728,3,-999999,++,-1=Crate,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
            ),
            HLDObj.from_string(
                'obj,Spawner,7726,464,728,3,-999999,++,-1=Crate,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
            ),
            HLDObj.from_string(
                'obj,Spawner,1324,464,752,3,-999999,++,-1=MultiHitCrate,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
            ),
        ],
        direction=HLDDirection.ABYSS,
    )


@pytest.fixture
def testing_obj_string() -> str:
    return 'obj,Spawner,593,536,352,6,-999999,++,-1=dirk,-2=-999999,-4=1,-5=0,-6=-1,-7=0,-8=0,'
